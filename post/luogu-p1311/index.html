<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=author content="Find_NICK"><meta name=description content="$ O(n) $ 做法 首先预处理一个数组res[i],表示第 $ 1 $ 到 $ i $ 的客栈中编号最大且满足最低消费小于等于q的客栈编号; 维护一个前缀和数组ans["><link rel=icon href=/favicon.ico><meta name=keywords content=" OI  code  algorithm  solution "><meta property="og:title" content="洛谷P1311"><meta property="og:description" content="$ O(n) $ 做法 首先预处理一个数组res[i],表示第 $ 1 $ 到 $ i $ 的客栈中编号最大且满足最低消费小于等于q的客栈编号; 维护一个前缀和数组ans["><meta property="og:type" content="article"><meta property="og:url" content="/post/luogu-p1311/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-08-14T13:41:59+08:00"><meta property="article:modified_time" content="2023-08-14T13:41:59+08:00"><link rel=canonical href=/post/luogu-p1311/><meta itemprop=name content="洛谷P1311"><meta itemprop=description content="$ O(n) $ 做法 首先预处理一个数组res[i],表示第 $ 1 $ 到 $ i $ 的客栈中编号最大且满足最低消费小于等于q的客栈编号; 维护一个前缀和数组ans["><meta itemprop=datePublished content="2023-08-14T13:41:59+08:00"><meta itemprop=dateModified content="2023-08-14T13:41:59+08:00"><meta itemprop=wordCount content="252"><meta itemprop=keywords content="algorithm,solution,"><link media=screen rel=stylesheet href=/css/common.css><link media=screen rel=stylesheet href=/css/content.css><title>洛谷P1311 - 0x3f</title><meta name=twitter:card content="summary"><meta name=twitter:title content="洛谷P1311"><meta name=twitter:description content="$ O(n) $ 做法 首先预处理一个数组res[i],表示第 $ 1 $ 到 $ i $ 的客栈中编号最大且满足最低消费小于等于q的客栈编号; 维护一个前缀和数组ans["><link rel=stylesheet href=/css/single.css></head><body><div id=wrapper><header id=header><script async src=/js/instantpage.js></script>
<link href=/css/custom.css rel=stylesheet><h1><a href=/>0x3f</a></h1><link rel=stylesheet href=https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.css crossorigin=anonymous><link rel=stylesheet href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;700&display=swap"><script defer src=https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.js crossorigin=anonymous></script>
<script defer src=https://cdn.staticfile.org/KaTeX/0.16.8/contrib/auto-render.min.js crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}],ignoredTags:["script","noscript","style","textarea","pre","code","option"],throwOnError:!1})})</script><nav><span class=nav-bar-item><a class=link href=/>Post</a></span>
<span class=nav-bar-item><a class=link href=/post/>Archives</a></span>
<span class=nav-bar-item><a class=link href=/about/>About</a></span></nav></header><main id=main class=post><h1>洛谷P1311</h1><div><b>Keywords:</b>
<a class=link href=/tags/algorithm>#algorithm</a>
<a class=link href=/tags/solution>#solution</a></div><article class=content><p>$ O(n) $ 做法</p><p>首先预处理一个数组<code>res[i]</code>,表示第 $ 1 $ 到 $ i $ 的客栈中编号最大且满足最低消费小于等于q的客栈编号;</p><p>维护一个前缀和数组<code>ans[i][j]</code>,i为颜色,j为编号, $ O(1) $ 求出 1~j 中有多少个颜色为i的客栈;</p><p>枚举较大的客栈的编号i,<code>1~res[i]</code> 是不考虑颜色因素所能选的区间,ans[i][res[i]]即是右端点为i时的答案.</p><p>注意当res[i]=i时,因为一个客栈不能选两次,因此答案要减一.</p><p>累加即可.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic>#include</span><span style=color:#999;font-weight:700;font-style:italic>&lt;cstdio&gt;</span><span style=color:#999;font-weight:700;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic>#include</span><span style=color:#999;font-weight:700;font-style:italic>&lt;cstring&gt;</span><span style=color:#999;font-weight:700;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#999;font-weight:700;font-style:italic></span><span style=color:#000;font-weight:700>using</span> <span style=color:#000;font-weight:700>namespace</span> std;
</span></span><span style=display:flex><span><span style=color:#458;font-weight:700>int</span> n,k,p;
</span></span><span style=display:flex><span><span style=color:#458;font-weight:700>int</span> a[<span style=color:#099>200005</span>],b,res[<span style=color:#099>200005</span>],ans[<span style=color:#099>55</span>][<span style=color:#099>200005</span>];
</span></span><span style=display:flex><span><span style=color:#458;font-weight:700>long</span> <span style=color:#458;font-weight:700>long</span> ret<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>;
</span></span><span style=display:flex><span><span style=color:#458;font-weight:700>int</span> <span style=color:#900;font-weight:700>main</span>(){
</span></span><span style=display:flex><span>	memset(res,<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>,<span style=color:#000;font-weight:700>sizeof</span> res);
</span></span><span style=display:flex><span>	scanf(<span style=color:#d14>&#34;%d%d%d&#34;</span>,<span style=color:#000;font-weight:700>&amp;</span>n,<span style=color:#000;font-weight:700>&amp;</span>k,<span style=color:#000;font-weight:700>&amp;</span>p);
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>for</span>(<span style=color:#458;font-weight:700>int</span> i<span style=color:#000;font-weight:700>=</span><span style=color:#099>1</span>;i<span style=color:#000;font-weight:700>&lt;=</span>n;i<span style=color:#000;font-weight:700>++</span>){
</span></span><span style=display:flex><span>		scanf(<span style=color:#d14>&#34;%d%d&#34;</span>,<span style=color:#000;font-weight:700>&amp;</span>a[i],<span style=color:#000;font-weight:700>&amp;</span>b);
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>if</span>(b<span style=color:#000;font-weight:700>&lt;=</span>p){
</span></span><span style=display:flex><span>			res[i]<span style=color:#000;font-weight:700>=</span>i;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>else</span>{
</span></span><span style=display:flex><span>			res[i]<span style=color:#000;font-weight:700>=</span>res[i<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>];
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>for</span>(<span style=color:#458;font-weight:700>int</span> i<span style=color:#000;font-weight:700>=</span><span style=color:#099>1</span>;i<span style=color:#000;font-weight:700>&lt;=</span>n;i<span style=color:#000;font-weight:700>++</span>){
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>for</span>(<span style=color:#458;font-weight:700>int</span> type<span style=color:#000;font-weight:700>=</span><span style=color:#099>0</span>;type<span style=color:#000;font-weight:700>&lt;=</span>k;type<span style=color:#000;font-weight:700>++</span>){
</span></span><span style=display:flex><span>			ans[type][i]<span style=color:#000;font-weight:700>=</span>ans[type][i<span style=color:#000;font-weight:700>-</span><span style=color:#099>1</span>];
</span></span><span style=display:flex><span>			<span style=color:#000;font-weight:700>if</span>(a[i]<span style=color:#000;font-weight:700>==</span>type){
</span></span><span style=display:flex><span>				ans[type][i]<span style=color:#000;font-weight:700>++</span>;
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>for</span>(<span style=color:#458;font-weight:700>int</span> i<span style=color:#000;font-weight:700>=</span><span style=color:#099>1</span>;i<span style=color:#000;font-weight:700>&lt;=</span>n;i<span style=color:#000;font-weight:700>++</span>){
</span></span><span style=display:flex><span>		<span style=color:#000;font-weight:700>if</span>(i<span style=color:#000;font-weight:700>==</span>res[i]){
</span></span><span style=display:flex><span>			ret<span style=color:#000;font-weight:700>--</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		ret<span style=color:#000;font-weight:700>+=</span>ans[a[i]][res[i]];
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	printf(<span style=color:#d14>&#34;%lld&#34;</span>,ret);
</span></span><span style=display:flex><span>	<span style=color:#000;font-weight:700>return</span> <span style=color:#099>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></article><div class=paginator><a class=link href=/post/prefixsum/>← prev</a>
<a class=link href=/post/luogu-p1083/>next →</a></div><div class=comment></div></main><footer id=footer><div><span>© 2023</span> - <span>2023</span></div><div class=footnote><span></span></div></footer></div></body></html>
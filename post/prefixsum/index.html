<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  
  <meta name="author" content="Find_NICK">

  
  
  <meta name="description" content="前缀和 作用:求区间和 时间复杂度: $ O(n) $ 预处理, $ O(1) $ 查询. 预处理 假设原数组为$ a_1,a_2,a_3,&hellip; $ 前缀和数组 $ sum_1=a_1 $ $ sum_2=a_1&#43;a_2=sum_1&#43;a_2 $ $ sum_3=a_1&#43;a_2&#43;a_3=sum_2&#43;a_3 $ $ &hellip; $ 查询 查询 $ [l,r] $ 区间内和：">
  

  
  <link rel="icon" href="https://findnick.top/favicon.ico">

  
  
  <meta name="keywords" content=" OI  code  algorithm ">
  

  
  

  
  <meta property="og:title" content="前缀和&amp;差分" />
<meta property="og:description" content="前缀和 作用:求区间和 时间复杂度: $ O(n) $ 预处理, $ O(1) $ 查询. 预处理 假设原数组为$ a_1,a_2,a_3,&hellip; $ 前缀和数组 $ sum_1=a_1 $ $ sum_2=a_1&#43;a_2=sum_1&#43;a_2 $ $ sum_3=a_1&#43;a_2&#43;a_3=sum_2&#43;a_3 $ $ &hellip; $ 查询 查询 $ [l,r] $ 区间内和：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://findnick.top/post/prefixsum/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-08-11T21:27:09+08:00" />
<meta property="article:modified_time" content="2023-08-11T21:27:09+08:00" />


  
  <link rel="canonical" href="https://findnick.top/post/prefixsum/">

  
  
  <meta itemprop="name" content="前缀和&amp;差分">
<meta itemprop="description" content="前缀和 作用:求区间和 时间复杂度: $ O(n) $ 预处理, $ O(1) $ 查询. 预处理 假设原数组为$ a_1,a_2,a_3,&hellip; $ 前缀和数组 $ sum_1=a_1 $ $ sum_2=a_1&#43;a_2=sum_1&#43;a_2 $ $ sum_3=a_1&#43;a_2&#43;a_3=sum_2&#43;a_3 $ $ &hellip; $ 查询 查询 $ [l,r] $ 区间内和："><meta itemprop="datePublished" content="2023-08-11T21:27:09+08:00" />
<meta itemprop="dateModified" content="2023-08-11T21:27:09+08:00" />
<meta itemprop="wordCount" content="273">
<meta itemprop="keywords" content="algorithm," />

  
  <link media="screen" rel="stylesheet" href='https://findnick.top/css/common.css'>
  <link media="screen" rel="stylesheet" href='https://findnick.top/css/content.css'>

  
  
  <title>前缀和&amp;差分 - 0x3f</title>
  

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="前缀和&amp;差分"/>
<meta name="twitter:description" content="前缀和 作用:求区间和 时间复杂度: $ O(n) $ 预处理, $ O(1) $ 查询. 预处理 假设原数组为$ a_1,a_2,a_3,&hellip; $ 前缀和数组 $ sum_1=a_1 $ $ sum_2=a_1&#43;a_2=sum_1&#43;a_2 $ $ sum_3=a_1&#43;a_2&#43;a_3=sum_2&#43;a_3 $ $ &hellip; $ 查询 查询 $ [l,r] $ 区间内和："/>

  
<link rel="stylesheet" href='https://findnick.top/css/single.css'>

</head>

<body>
  <div id="wrapper">
    <header id="header">
  
  <script async src="/js/instantpage.js"></script>
  <link href="/css/custom.css" rel="stylesheet" />
  <h1>
    <a href="https://findnick.top/">0x3f</a>
  </h1>
  

  
  
  
  
  <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;700&display=swap">
  <script defer src="https://cdn.staticfile.org/KaTeX/0.16.8/katex.min.js" crossorigin="anonymous"></script>
<script defer src="https://cdn.staticfile.org/KaTeX/0.16.8/contrib/auto-render.min.js" crossorigin="anonymous"></script>
<script defer src="https://cdn.staticfile.org/twikoo/1.6.18/twikoo.all.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '\\[', right: '\\]', display: true },
        { left: '$', right: '$', display: false },
        { left: '\\(', right: '\\)', display: false }
      ],
      ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'option'],
      throwOnError: false
    });
  });
</script>
  <nav>
    
    <span class="nav-bar-item">
      <a class="link" href="/">Post</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/post/">Archives</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/about/">About</a>
    </span>
    
  </nav>
</header>

    
<main id="main" class="post">
  
  
  <h1>前缀和&amp;差分</h1>
  
  <div>
    <b>Keywords: </b>
    
    <a class="link" href='https://findnick.top/tags/algorithm'>#algorithm</a>
    
  </div>
  
  
  <article class="content">
    
    <h3 id="前缀和">前缀和</h3>
<p>作用:求区间和</p>
<p>时间复杂度: $ O(n) $ 预处理, $ O(1) $ 查询.</p>
<h4 id="预处理">预处理</h4>
<p>假设原数组为$ a_1,a_2,a_3,&hellip; $</p>
<p>前缀和数组</p>
<p>$ sum_1=a_1 $</p>
<p>$ sum_2=a_1+a_2=sum_1+a_2 $</p>
<p>$ sum_3=a_1+a_2+a_3=sum_2+a_3 $</p>
<p>$ &hellip; $</p>
<h4 id="查询">查询</h4>
<p>查询 $ [l,r] $ 区间内和：</p>
<p>$ a_l+a_{l+1}+a_{l+2}+&hellip;+a_{r-1}+a_{r} $</p>
<p>$ =(a_1+a_2+&hellip;+a_{r-1}+a_r)-(a_1+a_2+&hellip;+a_{l-2}+a_{l-1}) $</p>
<p>$ =sum_r-sum_{l-1} $</p>
<h3 id="差分">差分</h3>
<p>作用:区间加</p>
<p>时间复杂度: $ O(n) $ 预处理, $ O(1) $ 修改.</p>
<p>本质上是前缀和的逆运算.</p>
<h4 id="区间加">区间加</h4>
<p>通过对前缀和的研究,可以发现,当 <code>a[k]</code>  增加了 <code>x</code> 时,</p>
<p><code>sum[k]</code>,<code>sum[k+1]</code>, $ &hellip; $ 都增加了 $ x $ .</p>
<p>这样就实现了区间加.</p>
<p>对 $ [l,r] $ 区间进行加 $ x $ 操作时,只需将 <code>sum[l]</code> 增加 <code>x</code> , 并将 <code>sum[r+1]</code> 增加 <code>-x</code> 即可.</p>
<h4 id="预处理-1">预处理</h4>
<p>求差分数组 <code>d</code> (将原数组 <code>a</code> 当作前缀和).</p>
<p><code>a[i]=a[i-1]+d[i]</code></p>
<p>移项,</p>
<p><code>a[i]-a[i-1]=d[i]</code></p>
<p>这样就完成了转换.</p>
<h3 id="应用">应用</h3>
<h4 id="二维前缀和">二维前缀和</h4>
<h5 id="预处理-2">预处理</h5>
<p>基于容斥原理.</p>
<p><code>sum[i][j]=sum[i-1][j]+sum[i][j-1]-sum[i-1][j-1]+a[i][j]</code></p>
<h5 id="查询-1">查询</h5>
<p>求 $ (x_1,y_1) $ 到 $ (x_2,y_2) $ 的和.</p>
<p>$ \sum_{i=x_1}^{x_2} \sum_{j=y_1}^{y_2} a_{i,j} $ = <code>sum[x2][y2]-sum[x1-1][y2]-sum[x2][y1-1]+sum[x1-1][y1-1]</code>.</p>

    
  </article>
  <div class="paginator">
    
    <a class="link" href="https://findnick.top/post/binary-search/">← prev</a>
    
    
    <a class="link" href="https://findnick.top/post/luogu-p1311/">next →</a>
    
  </div>
  <div class="comment">
    
    
    
    
    
    

  </div>
  <style>
  .tk-footer {
    display:none!important
  }
  </style>
  <div id="tcomment"></div>
  <script type="module">
  twikoo.init({
    envId: 'https://twikoo.findnick.top/',
    el: '#tcomment',
  })
</script>
  

</main>

    <footer id="footer">
  <div>
    <span>© 2023</span> - <span>2023</span>
  </div>
  <div class="footnote">
    <span></span>
  </div>
</footer>

  </div>
  
  
  

  
  

  
  

</body>

</html>
